<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Hershey Text Converter</title>
  <style>
    /* Basic styling for the plugin UI */
    body {
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      padding: 0px;
      color: #333;
      background-color: #f8f8f8;
    }

    .container {
      margin: 0 auto;
      /* Default light mode container background */
      padding: 10px;
    }

    h2 {
      font-size: 20px;
      margin-bottom: 20px;
      color: #222;
      display: none;
    }

    .input-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #555;
    }

    input[type="number"],
    select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      /* Default light mode border */
      border-radius: 6px;
      box-sizing: border-box;
      font-size: 14px;
      transition: border-color 0.2s;
      background-color: #fff;
      color: #333;
    }

    input[type="number"]:focus,
    select:focus {
      outline: none;
      border-color: #18A0FB;
      box-shadow: 0 0 0 2px rgba(24, 160, 251, 0.2);
    }

    .button-group {
      display: flex;
      gap: 1rem;
      justify-content: start;
      margin-top: 25px;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: background-color 0.2s, box-shadow 0.2s;
    }

    button#convert {
      background-color: #18A0FB;
      color: white;
    }

    button#convert:hover {
      background-color: #0E8CD8;
      box-shadow: 0 2px 8px rgba(24, 160, 251, 0.3);
    }

    button#close {
      background-color: #e0e0e0;
      color: #555;
    }

    button#close:hover {
      background-color: #d0d0d0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    /* --- Dark Mode Styles --- */
    @media (prefers-color-scheme: dark) {

      html,
      body {
        background-color: #2c2c2c;
        color: #e0e0e0;
      }

      h2 {
        color: #f0f0f0;
      }

      label {
        color: #c0c0c0;
      }

      input[type="number"],
      select {
        background-color: #444444;
        border-color: #555555;
        color: #f0f0f0;
      }

      input[type="number"]:focus,
      select:focus {
        border-color: #18A0FB;
        box-shadow: 0 0 0 2px rgba(24, 160, 251, 0.4);
      }

      button#convert {
        background-color: #18A0FB;
        color: white;
      }

      button#convert:hover {
        background-color: #0E8CD8;
        box-shadow: 0 2px 8px rgba(24, 160, 251, 0.4);
      }

      button#close {
        background-color: #555555;
        color: #e0e0e0;
      }

      button#close:hover {
        background-color: #666666;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h2>Hershey Text Converter</h2>
    <div class="input-group">
      <label for="textStyle">Text Style:</label>
      <select id="textStyle">
        <option value="EMS Readability">EMS Readability</option>
        <option value="EMS Readability Italic">EMS Readability Italic</option>
      </select>
    </div>
    <div class="input-group">
      <label for="fontSize">Font Size (px):</label>
      <input id="fontSize" type="number" value="20" min="1">
    </div>
    <div class="input-group">
      <label for="lineHeight">Line Height (px):</label>
      <input id="lineHeight" type="number" value="28" min="0">
    </div>
    <div class="input-group">
      <label for="letterSpacing">Letter Spacing:</label>
      <input id="letterSpacing" type="number" value="0" step="0.1">
    </div>
    <div class="input-group">
      <label for="lineWidth">Line Width (px):</label>
      <input id="lineWidth" type="number" value="2" min="0.5" step="0.5">
    </div>
    <div class="button-group">
      <button id="convert">Convert</button>
      <button id="close">Close</button>
    </div>
  </div>

  <script>
    // Get references to UI elements
    const fontSizeInput = document.getElementById('fontSize');
    const lineWidthInput = document.getElementById('lineWidth');
    const lineHeightInput = document.getElementById('lineHeight');
    const letterSpacingInput = document.getElementById('letterSpacing');
    const textStyleSelect = document.getElementById('textStyle');
    const convertButton = document.getElementById('convert');
    const closeButton = document.getElementById('close');

    // Event listener for the "Convert" button
    convertButton.onclick = () => {
      // Parse input values
      const fontSize = parseFloat(fontSizeInput.value);
      const lineWidth = parseFloat(lineWidthInput.value);
      const lineHeight = parseFloat(lineHeightInput.value);
      const letterSpacing = parseFloat(letterSpacingInput.value);
      const textStyle = textStyleSelect.value;

      // Send a message to the Figma plugin code with the user's choices
      parent.postMessage({
        pluginMessage: {
          type: 'convert-text',
          fontSize,
          lineWidth,
          lineHeight,
          letterSpacing,
          textStyle
        }
      }, '*');
    };

    // Event listener for the "Close" button
    closeButton.onclick = () => {
      // Send a message to the Figma plugin code to close the plugin
      parent.postMessage({ pluginMessage: { type: 'close' } }, '*');
    };
  </script>
</body>

</html>